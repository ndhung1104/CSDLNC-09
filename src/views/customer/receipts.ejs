<% const bp=typeof basePath !=='undefined' ? basePath : '/customer' ; %>
  <section class="py-4 bg-light">
    <div class="container">
      <h2 class="mb-0">My Receipts</h2>
      <p class="text-muted mb-0">View your payment history</p>
    </div>
  </section>

  <section class="py-4">
    <div class="container">
      <div class="row g-4">
        <% if (typeof receipts !=='undefined' && receipts && receipts.length> 0) { %>
          <% receipts.forEach((receipt)=> { %>
            <% const receiptId=receipt.receiptId || receipt.id; %>
              <% const receiptNo=receipt.receiptNo || (receiptId ? ('INV-' + receiptId) : '' ); %>
                <% const receiptDate=receipt.receiptDate || receipt.date; %>
                  <% const totalPrice=receipt.totalPrice || receipt.total; %>
                    <div class="col-md-6">
                      <div class="customer-card card">
                        <div class="card-header bg-white d-flex justify-content-between align-items-center">
                          <div>
                            <h6 class="mb-0">Receipt #<%= receiptNo %>
                            </h6>
                            <small class="text-muted">
                              <%= receiptDate ? new Date(receiptDate).toLocaleDateString('en-US', { month: 'short' ,
                                day: 'numeric' , year: 'numeric' }) : '-' %>
                            </small>
                          </div>
                          <span class="badge bg-success-subtle text-success">Paid</span>
                        </div>
                        <div class="card-body">
                          <div class="mb-3">
                            <div class="d-flex justify-content-between mb-2">
                              <span class="text-muted">Branch:</span>
                              <strong>
                                <%= receipt.branchName %>
                              </strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                              <span class="text-muted">Payment Method:</span>
                              <strong>
                                <%= receipt.paymentMethod %>
                              </strong>
                            </div>
                          </div>
                          <hr>
                          <h6 class="mb-2">Items:</h6>
                          <ul class="list-unstyled mb-3">
                            <% if (typeof receipt.items !=='undefined' && receipt.items && receipt.items.length> 0) { %>
                              <% receipt.items.forEach((item)=> { %>
                                <li class="d-flex justify-content-between mb-1">
                                  <span>
                                    <%= item.itemName %> (x<%= item.quantity %>)
                                  </span>
                                  <span>$<%= item.totalPrice %></span>
                                </li>
                                <% }); %>
                                  <% } %>
                          </ul>
                          <hr>
                          <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Total:</h5>
                            <h5 class="mb-0 text-primary">$<%= totalPrice %>
                            </h5>
                          </div>
                        </div>
                      </div>
                    </div>
                    <% }); %>
                      <% } else { %>
                        <div class="col-12">
                          <div class="text-center py-5">
                            <i class="bi bi-receipt text-muted" style="font-size: 4rem;"></i>
                            <p class="text-muted mt-3">No receipts yet</p>
                          </div>
                        </div>
                        <% } %>
      </div>
    </div>
  </section>